--
-- PostgreSQL database dump
--

SET statement_timeout = 0;
SET lock_timeout = 0;
SET client_encoding = 'UTF8';
SET standard_conforming_strings = on;
SET check_function_bodies = false;
SET client_min_messages = warning;

--
-- Name: plpgsql; Type: EXTENSION; Schema: -; Owner: 
--

CREATE EXTENSION IF NOT EXISTS plpgsql WITH SCHEMA pg_catalog;


--
-- Name: EXTENSION plpgsql; Type: COMMENT; Schema: -; Owner: 
--

COMMENT ON EXTENSION plpgsql IS 'PL/pgSQL procedural language';


SET search_path = public, pg_catalog;

SET default_tablespace = '';

SET default_with_oids = false;

--
-- Name: blueprint; Type: TABLE; Schema: public; Owner: seqadmin; Tablespace: 
--

CREATE TABLE blueprint (
    id bigint NOT NULL,
    blueprinttext text,
    name character varying(255),
    user_id bigint
);


ALTER TABLE public.blueprint OWNER TO seqadmin;

--
-- Name: blueprint_table; Type: SEQUENCE; Schema: public; Owner: seqadmin
--

CREATE SEQUENCE blueprint_table
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;
    
ALTER TABLE public.blueprint_table OWNER TO seqadmin;

--
-- Name: cloudbreakuser; Type: TABLE; Schema: public; Owner: seqadmin; Tablespace: 
--

CREATE TABLE cloudbreakuser (
    id bigint NOT NULL,
    email character varying(255) NOT NULL,
    firstname character varying(255) NOT NULL,
    lastname character varying(255) NOT NULL,
    password character varying(255) NOT NULL,
    temporaryawscredentials_accesskeyid character varying(255)
);


ALTER TABLE public.cloudbreakuser OWNER TO seqadmin;

--
-- Name: credential; Type: TABLE; Schema: public; Owner: seqadmin; Tablespace: 
--

CREATE TABLE credential (
    dtype character varying(31) NOT NULL,
    id bigint NOT NULL,
    cloudplatform integer,
    name character varying(255),
    jks character varying(255),
    subscriptionid character varying(255),
    instanceprofilerolearn character varying(255),
    rolearn character varying(255),
    azurecredentialowner_id bigint,
    awscredentialowner_id bigint
);


ALTER TABLE public.credential OWNER TO seqadmin;

--
-- Name: credential_table; Type: SEQUENCE; Schema: public; Owner: seqadmin
--

CREATE SEQUENCE credential_table
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE public.credential_table OWNER TO seqadmin;

--
-- Name: hibernate_sequence; Type: SEQUENCE; Schema: public; Owner: seqadmin
--

CREATE SEQUENCE hibernate_sequence
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE public.hibernate_sequence OWNER TO seqadmin;

--
-- Name: port; Type: TABLE; Schema: public; Owner: seqadmin; Tablespace: 
--

CREATE TABLE port (
    id bigint NOT NULL,
    localport character varying(255),
    name character varying(255),
    port character varying(255),
    protocol character varying(255),
    azuretemplate_id bigint
);


ALTER TABLE public.port OWNER TO seqadmin;

--
-- Name: sequence_table; Type: SEQUENCE; Schema: public; Owner: seqadmin
--

CREATE SEQUENCE sequence_table
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE public.sequence_table OWNER TO seqadmin;

--
-- Name: stack; Type: TABLE; Schema: public; Owner: seqadmin; Tablespace: 
--

CREATE TABLE stack (
    id bigint NOT NULL,
    ambariip character varying(255),
    name character varying(255),
    nodecount integer,
    status integer,
    credential_id bigint,
    template_id bigint,
    user_id bigint
);


ALTER TABLE public.stack OWNER TO seqadmin;

--
-- Name: stack_table; Type: SEQUENCE; Schema: public; Owner: seqadmin
--

CREATE SEQUENCE stack_table
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE public.stack_table OWNER TO seqadmin;

--
-- Name: template; Type: TABLE; Schema: public; Owner: seqadmin; Tablespace: 
--

CREATE TABLE template (
    dtype character varying(31) NOT NULL,
    id bigint NOT NULL,
    amiid character varying(255),
    instancetype integer,
    keyname character varying(255),
    name character varying(255),
    region integer,
    sshlocation character varying(255),
    addressprefix character varying(255),
    deploymentslot character varying(255),
    description character varying(255),
    imagename character varying(255),
    location character varying(255),
    password character varying(255),
    sshpublickeyfingerprint character varying(255),
    sshpublickeypath character varying(255),
    subnetaddressprefix character varying(255),
    username character varying(255),
    vmtype character varying(255),
    awstemplateowner_id bigint,
    azuretemplateowner_id bigint
);


ALTER TABLE public.template OWNER TO seqadmin;

--
-- Name: temporaryawscredentials; Type: TABLE; Schema: public; Owner: seqadmin; Tablespace: 
--

CREATE TABLE temporaryawscredentials (
    accesskeyid character varying(255) NOT NULL,
    secretaccesskey character varying(255),
    sessiontoken text,
    validuntil bigint NOT NULL
);


ALTER TABLE public.temporaryawscredentials OWNER TO seqadmin;

--
-- Name: blueprint_pkey; Type: CONSTRAINT; Schema: public; Owner: seqadmin; Tablespace: 
--

ALTER TABLE ONLY blueprint
    ADD CONSTRAINT blueprint_pkey PRIMARY KEY (id);


--
-- Name: cloudbreakuser_pkey; Type: CONSTRAINT; Schema: public; Owner: seqadmin; Tablespace: 
--

ALTER TABLE ONLY cloudbreakuser
    ADD CONSTRAINT cloudbreakuser_pkey PRIMARY KEY (id);


--
-- Name: credential_pkey; Type: CONSTRAINT; Schema: public; Owner: seqadmin; Tablespace: 
--

ALTER TABLE ONLY credential
    ADD CONSTRAINT credential_pkey PRIMARY KEY (id);


--
-- Name: port_pkey; Type: CONSTRAINT; Schema: public; Owner: seqadmin; Tablespace: 
--

ALTER TABLE ONLY port
    ADD CONSTRAINT port_pkey PRIMARY KEY (id);


--
-- Name: stack_pkey; Type: CONSTRAINT; Schema: public; Owner: seqadmin; Tablespace: 
--

ALTER TABLE ONLY stack
    ADD CONSTRAINT stack_pkey PRIMARY KEY (id);


--
-- Name: template_pkey; Type: CONSTRAINT; Schema: public; Owner: seqadmin; Tablespace: 
--

ALTER TABLE ONLY template
    ADD CONSTRAINT template_pkey PRIMARY KEY (id);


--
-- Name: temporaryawscredentials_pkey; Type: CONSTRAINT; Schema: public; Owner: seqadmin; Tablespace: 
--

ALTER TABLE ONLY temporaryawscredentials
    ADD CONSTRAINT temporaryawscredentials_pkey PRIMARY KEY (accesskeyid);


--
-- Name: uk_lox64g52iy3k5kibbol37ht8w; Type: CONSTRAINT; Schema: public; Owner: seqadmin; Tablespace: 
--

ALTER TABLE ONLY cloudbreakuser
    ADD CONSTRAINT uk_lox64g52iy3k5kibbol37ht8w UNIQUE (email);


--
-- Name: fk_10jipmg10swrqmqubgo4dy7k2; Type: FK CONSTRAINT; Schema: public; Owner: seqadmin
--

ALTER TABLE ONLY port
    ADD CONSTRAINT fk_10jipmg10swrqmqubgo4dy7k2 FOREIGN KEY (azuretemplate_id) REFERENCES template(id);


--
-- Name: fk_7175vk9tgmhvq04moxgqv5e8o; Type: FK CONSTRAINT; Schema: public; Owner: seqadmin
--

ALTER TABLE ONLY stack
    ADD CONSTRAINT fk_7175vk9tgmhvq04moxgqv5e8o FOREIGN KEY (credential_id) REFERENCES credential(id);


--
-- Name: fk_9u4c7ahw5afggonho5o9qtf7j; Type: FK CONSTRAINT; Schema: public; Owner: seqadmin
--

ALTER TABLE ONLY stack
    ADD CONSTRAINT fk_9u4c7ahw5afggonho5o9qtf7j FOREIGN KEY (user_id) REFERENCES cloudbreakuser(id);


--
-- Name: fk_egeykstsqask9ix76p457v7l1; Type: FK CONSTRAINT; Schema: public; Owner: seqadmin
--

ALTER TABLE ONLY credential
    ADD CONSTRAINT fk_egeykstsqask9ix76p457v7l1 FOREIGN KEY (awscredentialowner_id) REFERENCES cloudbreakuser(id);


--
-- Name: fk_gcg011lvnsifaj7c2xnspsutw; Type: FK CONSTRAINT; Schema: public; Owner: seqadmin
--

ALTER TABLE ONLY template
    ADD CONSTRAINT fk_gcg011lvnsifaj7c2xnspsutw FOREIGN KEY (awstemplateowner_id) REFERENCES cloudbreakuser(id);


--
-- Name: fk_i6psb9h62yi1ngw4qmctmcva9; Type: FK CONSTRAINT; Schema: public; Owner: seqadmin
--

ALTER TABLE ONLY cloudbreakuser
    ADD CONSTRAINT fk_i6psb9h62yi1ngw4qmctmcva9 FOREIGN KEY (temporaryawscredentials_accesskeyid) REFERENCES temporaryawscredentials(accesskeyid);


--
-- Name: fk_k7ax5dsobijpt2jwctvi6h4w1; Type: FK CONSTRAINT; Schema: public; Owner: seqadmin
--

ALTER TABLE ONLY credential
    ADD CONSTRAINT fk_k7ax5dsobijpt2jwctvi6h4w1 FOREIGN KEY (azurecredentialowner_id) REFERENCES cloudbreakuser(id);


--
-- Name: fk_n271gunf8dbikvsr0pbre30ci; Type: FK CONSTRAINT; Schema: public; Owner: seqadmin
--

ALTER TABLE ONLY blueprint
    ADD CONSTRAINT fk_n271gunf8dbikvsr0pbre30ci FOREIGN KEY (user_id) REFERENCES cloudbreakuser(id);


--
-- Name: fk_qeabv5ven9q4f6qqfkhia795v; Type: FK CONSTRAINT; Schema: public; Owner: seqadmin
--

ALTER TABLE ONLY template
    ADD CONSTRAINT fk_qeabv5ven9q4f6qqfkhia795v FOREIGN KEY (azuretemplateowner_id) REFERENCES cloudbreakuser(id);


--
-- Name: fk_qt10rb41y0q0bcpnt1rls87n9; Type: FK CONSTRAINT; Schema: public; Owner: seqadmin
--

ALTER TABLE ONLY stack
    ADD CONSTRAINT fk_qt10rb41y0q0bcpnt1rls87n9 FOREIGN KEY (template_id) REFERENCES template(id);


--
-- Name: public; Type: ACL; Schema: -; Owner: postgres
--

REVOKE ALL ON SCHEMA public FROM PUBLIC;
REVOKE ALL ON SCHEMA public FROM postgres;
GRANT ALL ON SCHEMA public TO postgres;
GRANT ALL ON SCHEMA public TO PUBLIC;


--
-- PostgreSQL database dump complete
--

